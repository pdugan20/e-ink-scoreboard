#!/bin/sh

# Activate virtual environment for Python tools
if [ -f "venv/bin/activate" ]; then
    . venv/bin/activate
fi

# Add common Node.js paths
export PATH="/usr/local/bin:/opt/homebrew/bin:$PATH"

# Also source user's shell profile for nvm/node if available
if [ -f "$HOME/.nvm/nvm.sh" ]; then
    . "$HOME/.nvm/nvm.sh"
fi

echo "Running black check..."
black --check . || { echo "Black check failed. Run 'black .' to fix formatting."; exit 1; }

echo "Running ruff check..."
ruff check . || { echo "Ruff check failed. Run 'ruff check --fix .' to fix issues."; exit 1; }

echo "Running prettier check..."
npx prettier --check . || { echo "Prettier check failed. Run 'npx prettier --write .' to fix formatting."; exit 1; }

echo "Running eslint check..."
npx eslint . || { echo "ESLint check failed. Run 'npx eslint --fix .' to fix issues."; exit 1; }

echo "All checks passed!"
exit 0